import{k as g,l as f,m as v,n as _,p as m}from"./chunk-D7NB73YQ.js";import{l as R}from"./chunk-R5JHZCGE.js";import{Q as C}from"./chunk-US5SR3MD.js";import"./chunk-46JBANBK.js";import{$c as w,Ab as p,Bb as r,Cb as d,Db as l,Kb as o,Qb as E,Ra as z,Rb as I,Sb as T,_ as M,_c as x,ab as c,fb as n,gb as b,ja as h,sa as u}from"./chunk-VFPOCYTS.js";var N=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=b({type:i});static \u0275inj=M({})}return i})();var V=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=b({type:i});static \u0275inj=M({imports:[C,R,R,N,C]})}return i})();var j=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=b({type:i});static \u0275inj=M({imports:[C,C]})}return i})();var S=class i{constructor(e){this.$measureService=e}isActive=u(!1);handler=u(void 0);buttonHandler(e){e.button===0?this.toggleMarkAddition():e.button===1&&this.$measureService.allToolEntitiesCleaning("add-mark",this.$measureService.marksList,"measureLayer")}toggleMarkAddition(){try{this.isActive()===!1?(this.isActive.set(!0),this.$measureService.drawPointGraphics({id:"add-mark",reuse:!0,toolName:"\u041C\u0435\u0442\u043A\u0438",withCoordsDesc:!0,withoutHeightDesc:!0}),this.handler.set(new w(this.$measureService._viewer.scene.canvas)),this.handler()?.setInputAction(()=>{this.cancelTool()},x.RIGHT_CLICK)):this.isActive()===!0&&this.cancelTool()}catch(e){console.log(e),this.cancelTool()}}cancelByEsc(){this.cancelTool()}cancelTool(){this.$measureService.cancelTool(),this.isActive.set(!1),this.handler()!==void 0&&(this.handler()?.destroy(),this.handler.set(void 0))}static \u0275fac=function(t){return new(t||i)(c(m))};static \u0275cmp=n({type:i,selectors:[["add-mark"]],decls:4,vars:1,consts:[["title","\u041C\u0435\u0442\u043A\u0438","matButton","tonal",1,"masuring-tool-button",3,"mousedown","disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5a2.5 2.5 0 0 1 0-5a2.5 2.5 0 0 1 0 5"]],template:function(t,a){t&1&&(r(0,"button",0),o("mousedown",function(F){return a.buttonHandler(F)}),r(1,"mat-icon"),h(),r(2,"svg",1),l(3,"path",2),d()()()),t&2&&p("disabled",!a.isActive()&&a.$measureService.measuresBlocker())},dependencies:[f,g,_,v,j,V],styles:[".measuring-tools-container[_ngcontent-%COMP%]{position:absolute;z-index:101;left:500px;bottom:15px;width:max-content;height:35px;display:flex;justify-content:space-between;align-items:center;gap:5px;flex-flow:row wrap;pointer-events:none}.measuring-tools-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:auto}.masuring-tool-button[_ngcontent-%COMP%]{padding:0;min-width:var(--regular-btn-size);width:var(--regular-btn-size);height:var(--regular-btn-size);border-radius:16px;outline:1px solid var(--theme-outline-color)}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:0;margin:0;width:24px;height:24px}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.8}.gag[_ngcontent-%COMP%]{margin-right:var(--regular-btn-size);pointer-events:none}"],changeDetection:0})};var A=class i{constructor(e){this.$measureService=e}isActive=u(!1);handler=u(void 0);buttonHandler(e){e.button===0?this.toggleDrawing():e.button===1&&(this.$measureService.lineMeasureHasStarted()===!1?this.$measureService.allToolEntitiesCleaning("linear-measurements"):alert("\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u0435 \u043F\u043E\u0441\u0442\u0440\u043E\u0435\u043D\u0438\u0435"))}toggleDrawing(){try{this.isActive()===!1?(this.isActive.set(!0),this.$measureService.drawLineMeasureGraphics({id:"linear-measurements",reuse:!0,toolName:"\u041B\u0438\u043D\u0435\u0439\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u0440\u0435\u043D\u0438\u044F"}),this.handler.set(new w(this.$measureService._viewer.scene.canvas)),this.handler()?.setInputAction(()=>{this.$measureService.lineMeasureHasStarted()===!1&&this.cancelTool()},x.RIGHT_CLICK)):this.isActive()===!0&&this.cancelTool()}catch(e){console.log(e),this.cancelTool()}}cancelByEsc(){if(this.$measureService.lineMeasureHasStarted()===!0){let e=this.$measureService.linearMesurmentsLinesList()?.[this.$measureService.linearMesurmentsLinesList().length-1]?.id;if(!e)return;this.$measureService.removeEntitiesById(e,this.$measureService.linearMesurmentsLinesList)}this.cancelTool()}cancelTool(){this.$measureService.cancelTool(),this.$measureService.setLineMeasureHasStarted(!1),this.isActive.set(!1),this.handler()!==void 0&&(this.handler()?.destroy(),this.handler.set(void 0))}static \u0275fac=function(t){return new(t||i)(c(m))};static \u0275cmp=n({type:i,selectors:[["linear-measurements"]],decls:4,vars:1,consts:[["title","\u041B\u0438\u043D\u0435\u0439\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u0440\u0435\u043D\u0438\u044F","matButton","tonal",1,"masuring-tool-button",3,"mousedown","disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2z"]],template:function(t,a){t&1&&(r(0,"button",0),o("mousedown",function(F){return a.buttonHandler(F)}),r(1,"mat-icon"),h(),r(2,"svg",1),l(3,"path",2),d()()()),t&2&&p("disabled",!a.isActive()&&a.$measureService.measuresBlocker())},dependencies:[f,g,_,v],styles:[".measuring-tools-container[_ngcontent-%COMP%]{position:absolute;z-index:101;left:500px;bottom:15px;width:max-content;height:35px;display:flex;justify-content:space-between;align-items:center;gap:5px;flex-flow:row wrap;pointer-events:none}.measuring-tools-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:auto}.masuring-tool-button[_ngcontent-%COMP%]{padding:0;min-width:var(--regular-btn-size);width:var(--regular-btn-size);height:var(--regular-btn-size);border-radius:16px;outline:1px solid var(--theme-outline-color)}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:0;margin:0;width:24px;height:24px}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.8}.gag[_ngcontent-%COMP%]{margin-right:var(--regular-btn-size);pointer-events:none}"],changeDetection:0})};var D=class i{constructor(e){this.$measureService=e}isActive=u(!1);handler=u(void 0);toggleCleaning(){try{this.isActive()===!1?(this.isActive.set(!0),this.$measureService.entitiesCleaning({reuse:!0}),this.handler.set(new w(this.$measureService._viewer.scene.canvas)),this.handler()?.setInputAction(()=>{this.cancelTool()},x.RIGHT_CLICK)):this.isActive()===!0&&this.cancelTool()}catch(e){console.log(e),this.cancelTool()}}cancelByEsc(){this.cancelTool()}cancelTool(){this.$measureService.cancelTool(),this.isActive.set(!1),this.handler()!==void 0&&(this.handler()?.destroy(),this.handler.set(void 0))}static \u0275fac=function(t){return new(t||i)(c(m))};static \u0275cmp=n({type:i,selectors:[["erase-entity"]],decls:4,vars:1,consts:[["title","\u041B\u0430\u0441\u0442\u0438\u043A","matButton","tonal",1,"masuring-tool-button",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M16 11h-1V4c0-1.66-1.34-3-3-3S9 2.34 9 4v7H8c-2.76 0-5 2.24-5 5v5c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5c0-2.76-2.24-5-5-5m3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3z"]],template:function(t,a){t&1&&(r(0,"button",0),o("click",function(){return a.toggleCleaning()}),r(1,"mat-icon"),h(),r(2,"svg",1),l(3,"path",2),d()()()),t&2&&p("disabled",!a.isActive()&&a.$measureService.measuresBlocker())},dependencies:[f,g,_,v],styles:[".measuring-tools-container[_ngcontent-%COMP%]{position:absolute;z-index:101;left:500px;bottom:15px;width:max-content;height:35px;display:flex;justify-content:space-between;align-items:center;gap:5px;flex-flow:row wrap;pointer-events:none}.measuring-tools-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:auto}.masuring-tool-button[_ngcontent-%COMP%]{padding:0;min-width:var(--regular-btn-size);width:var(--regular-btn-size);height:var(--regular-btn-size);border-radius:16px;outline:1px solid var(--theme-outline-color)}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:0;margin:0;width:24px;height:24px}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.8}.gag[_ngcontent-%COMP%]{margin-right:var(--regular-btn-size);pointer-events:none}"],changeDetection:0})};var H=class i{constructor(e){this.$measureService=e}static \u0275fac=function(t){return new(t||i)(c(m))};static \u0275cmp=n({type:i,selectors:[["clear-measurements"]],decls:4,vars:1,consts:[["title","\u041E\u0447\u0438\u0441\u0442\u043A\u0430 \u043A\u0430\u0440\u0442\u044B","matButton","tonal",1,"masuring-tool-button",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8c1.85 0 3.55.63 4.9 1.69L5.69 16.9A7.9 7.9 0 0 1 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1A7.9 7.9 0 0 1 20 12c0 4.42-3.58 8-8 8"]],template:function(t,a){t&1&&(r(0,"button",0),o("click",function(){return a.$measureService.clearMeasuresDataSource()}),r(1,"mat-icon"),h(),r(2,"svg",1),l(3,"path",2),d()()()),t&2&&p("disabled",a.$measureService.measuresBlocker())},dependencies:[f,g,_,v],styles:[".measuring-tools-container[_ngcontent-%COMP%]{position:absolute;z-index:101;left:500px;bottom:15px;width:max-content;height:35px;display:flex;justify-content:space-between;align-items:center;gap:5px;flex-flow:row wrap;pointer-events:none}.measuring-tools-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:auto}.masuring-tool-button[_ngcontent-%COMP%]{padding:0;min-width:var(--regular-btn-size);width:var(--regular-btn-size);height:var(--regular-btn-size);border-radius:16px;outline:1px solid var(--theme-outline-color)}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:0;margin:0;width:24px;height:24px}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.8}.gag[_ngcontent-%COMP%]{margin-right:var(--regular-btn-size);pointer-events:none}"],changeDetection:0})};var q=class i{constructor(e){this.$measureService=e}addMarkRef;linearMeasurementsRef;eraseEntityRef;handleForEsc(){this.$measureService.handler()?._initializer&&(this.$measureService.handler()._initializer==="add-mark"?this.addMarkRef.cancelByEsc():this.$measureService.handler()._initializer==="linear-measurements"?this.linearMeasurementsRef.cancelByEsc():this.$measureService.handler()._initializer==="erase-entity"&&this.eraseEntityRef.cancelByEsc())}static \u0275fac=function(t){return new(t||i)(c(m))};static \u0275cmp=n({type:i,selectors:[["measuring-tools"]],viewQuery:function(t,a){if(t&1&&(E(S,5),E(A,5),E(D,5)),t&2){let s;I(s=T())&&(a.addMarkRef=s.first),I(s=T())&&(a.linearMeasurementsRef=s.first),I(s=T())&&(a.eraseEntityRef=s.first)}},hostBindings:function(t,a){t&1&&o("keyup.escape",function(){return a.handleForEsc()},z)},decls:6,vars:0,consts:[[1,"measuring-tools-container"],[1,"gag"]],template:function(t,a){t&1&&(r(0,"div",0),l(1,"add-mark")(2,"linear-measurements")(3,"div",1)(4,"erase-entity")(5,"clear-measurements"),d())},dependencies:[S,A,D,H],styles:[".measuring-tools-container[_ngcontent-%COMP%]{position:absolute;z-index:101;left:500px;bottom:15px;width:max-content;height:35px;display:flex;justify-content:space-between;align-items:center;gap:5px;flex-flow:row wrap;pointer-events:none}.measuring-tools-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:auto}.masuring-tool-button[_ngcontent-%COMP%]{padding:0;min-width:var(--regular-btn-size);width:var(--regular-btn-size);height:var(--regular-btn-size);border-radius:16px;outline:1px solid var(--theme-outline-color)}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:0;margin:0;width:24px;height:24px}.masuring-tool-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.8}.gag[_ngcontent-%COMP%]{margin-right:var(--regular-btn-size);pointer-events:none}"],changeDetection:0})};export{q as MeasuringTools};
